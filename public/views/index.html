<!DOCTYPE html>
<html  ng-app="calendar-app">
<head>
	  <title>Calendar App</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/styles.css">

    <!--  Angular from Google CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-resource.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <base href="/">
    <link href='../assets/css/fullcalendar.min.css' rel='stylesheet' />
    <link href='../assets/css/fullcalendar.print.min.css' rel='stylesheet' media='print' />
    <script src='../assets/js/moment.min.js'></script>
    <script src='../assets/js/jquery.min.js'></script>
    <script src='../assets/js/fullcalendar.min.js'></script>
    <script src='../assets/js/events.js'></script>

    <!-- Load AppController -->
    <script type="text/javascript" src="../controllers/index-controller.js"></script>
    <script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
</head>
<body  ng-controller="index-controller">
    <div class="container">
        <div id="googlebutton" ng-click="onGoogleLogin()">
            <div class="google-icon">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" viewBox="0 0 14 14" class="abcRioButtonSvg">
                    <g><path d="m7.228,7.958l-.661-.514c-.201-.166-.476-.386-.476-.79 0-.405 .275-.663 .513-.901 .769-.606 1.538-1.25 1.538-2.611 0-1.256-.632-1.862-.94-2.24h.899l.899-.902h-3.622c-.989,0-2.235,.147-3.278,1.01-.788,.68-1.172,1.618-1.172,2.464 0,1.433 1.098,2.885 3.04,2.885 .183,0 .384-.018 .586-.036-.092,.22-.183,.405-.183,.717 0,.569 .048,.809 .305,1.14-.824,.055-2.119,.12-3.254,.819-1.082,.644-1.411,1.717-1.411,2.379 0,1.361 1.281,2.629 3.938,2.629 3.149,0 4.816-1.747 4.816-3.474 .001-1.269-.731-1.894-1.537-2.575zm-4.689-5.384c0-.479 .091-.975 .402-1.361 .293-.368 .806-.607 1.283-.607 1.519,0 2.306,2.06 2.306,3.383 0,.33-.037,.918-.457,1.341-.294,.295-.786,.515-1.244,.515-1.575,0-2.29-2.041-2.29-3.271zm2.308,10.66c-1.96,0-3.224-.938-3.224-2.243s1.063-1.691 1.466-1.839c.77-.256 1.788-.348 1.788-.348s.456,.026 .665,.019c1.115,.546 1.997,1.487 1.997,2.428 0,1.138-.935,1.983-2.692,1.983z"></path></g>
                </svg>
            </div>
            <div class="sign-in-text">Sign in with Google</div>
        </div>
        <h1 id="greeting">{{signin.username}}</h1>
    
        <script src="../assets/js/app.js"></script>
        <script type="text/javascript">
            (function() {
              var p = document.createElement('script');
              p.type = "text/javascript";
              p.async = true;
              p.src = "https://apis.google.com/js/client.js?onload=onloadFunction";
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(p, s);
            })();
        </script>
    
        <!--Add buttons to initiate auth sequence and sign out-->
        <button id="authorize-button" style="display: none;">Get Google Calendar Events</button>
        <button id="signout-button" style="display: none;">Sign Out</button>
    
        <pre id="content">
            <script>
                document.getElementById('calendar').style.display = 'none';
                setInterval(function () {
                        var panel= $("#content");
                        var events = [];
                        var inputs = panel.find("input").each(function(){
                            var date = $(this).attr('name');
                            var summary = $(this).attr('value');
                            obj = {
                                title: summary,
                                start: date
                            };
                            events.push(obj);
                        });
                        if (events) {
                            $('#calendar').fullCalendar({
                                header: {
                                    left: 'prev,next today',
                                    center: 'title',
                                    right: 'month,basicWeek,basicDay'
                                },
                                defaultDate: '2017-11-12',
                                navLinks: true, // can click day/week names to navigate views
                                editable: true,
                                eventLimit: true, // allow "more" link when too many events
                                events: events
                            });
                        }
                    }
                    
                , 5000);
            </script>
        </pre>
        <div id="calendar"></div>
    
        <script type="text/javascript" src="../assets/js/calendar.js"></script>
        <script async defer src="https://apis.google.com/js/api.js"
          onload="this.onload=function(){};handleClientLoad()"
          onreadystatechange="if (this.readyState === 'complete') this.onload()">
        </script>
    </div>
</body>
</html>